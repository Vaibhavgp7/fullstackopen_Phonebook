{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\vaibh\\\\part1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\vaibh\\\\part1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\vaibh\\\\part1\\\\src\\\\App.js\";\nimport { useState, useEffect } from 'react';\nimport React from 'react';\nimport Person from './components/Person';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport personService from './services/persons';\nimport Message from './components/Message';\nvar App = function App() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    persons = _useState2[0],\n    setPersons = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    filteredPersons = _useState4[0],\n    setFilteredPersons = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    newFilter = _useState6[0],\n    setNewFilter = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    newName = _useState8[0],\n    setNewName = _useState8[1];\n  var _useState9 = useState(''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    newNumber = _useState10[0],\n    setNewNumber = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    message = _useState12[0],\n    setMessage = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    haserror = _useState14[0],\n    setHaserror = _useState14[1];\n  useEffect(function () {\n    //console.log('effect')\n    personService.getAll().then(function (initialpersons) {\n      setPersons(initialpersons);\n    });\n  }, []);\n  //console.log('render', persons.length, 'notes')\n\n  var addName = function addName(event) {\n    if (persons.filter(function (person) {\n      return person.name === newName;\n    }).length !== 0) {\n      event.preventDefault();\n      if (window.confirm(\"\".concat(newName, \" is already added to phonebook, replace the old number with a new one?\"))) {\n        var person = persons.filter(function (person) {\n          return person.name === newName;\n        });\n        var updatedperson = _objectSpread({}, person[0], {\n          number: newNumber\n        });\n        personService.updateperson(updatedperson.id, updatedperson).then(function (returnedPerson) {\n          setPersons(persons.map(function (person) {\n            return person.name !== newName ? person : returnedPerson;\n          }));\n          // console.log(`${newName}'s number has been successfully updated`)\n          setNewName('');\n          setNewNumber('');\n          setMessage(\"\".concat(newName, \"'s number has been successfully updated\"));\n          setTimeout(function () {\n            setMessage(null);\n          }, 5000);\n        }).catch(function (error) {\n          console.log(error);\n          setPersons(persons.filter(function (person) {\n            return person.name === newName;\n          }));\n          setNewName('');\n          setNewNumber('');\n          setMessage(\"Information of \".concat(newName, \" has already been removed from server\"));\n          setHaserror(true);\n          setTimeout(function () {\n            setMessage(null);\n          }, 5000);\n        });\n      }\n    } else {\n      event.preventDefault();\n      var nameObject = {\n        name: newName,\n        number: newNumber,\n        id: persons.length + 1\n      };\n      personService.createperson(nameObject).then(function (returnedPerson) {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n        setMessage(\"Added \".concat(nameObject.name));\n        setTimeout(function () {\n          setMessage(null);\n        }, 5000);\n      }).catch(function (error) {\n        setMessage(\"[ERROR] \".concat(error.response.data.message));\n        setTimeout(function () {\n          setMessage(null);\n        }, 5000);\n        setHaserror(true);\n        console.log(error.response.data);\n      });\n    }\n  };\n  var handleAddedName = function handleAddedName(event) {\n    setNewName(event.target.value);\n  };\n  var handleAddedNumber = function handleAddedNumber(event) {\n    setNewNumber(event.target.value);\n  };\n  var handleFilterChange = function handleFilterChange(event) {\n    //setCursor(event.target.selectionStart)\n    setNewFilter(event.target.value);\n    var nf = event.target.value;\n    if (event.target.value === '' || event.target.value === ' ') {\n      return;\n    }\n    setFilteredPersons(persons.filter(function (person) {\n      return person.name.match(new RegExp(nf, 'i'));\n    }));\n  };\n  var personsToShow = newFilter !== '' ? filteredPersons : persons;\n  var deletePerson = function deletePerson(id) {\n    var persontodelete = persons.filter(function (person) {\n      return person.id === id;\n    });\n    if (window.confirm(\"Delete \".concat(persontodelete[0].name, \" ?\"))) {\n      personService.removeperson(persontodelete[0].id);\n      console.log(\"\".concat(persontodelete[0].name, \" successfully deleted\"));\n      setPersons(persons.filter(function (person) {\n        return person.id !== persontodelete[0].id;\n      }));\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, \"Phonebook\"), /*#__PURE__*/React.createElement(Message, {\n    message: message,\n    haserror: haserror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Filter, {\n    value: newFilter,\n    onChange: handleFilterChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"add a new\"), /*#__PURE__*/React.createElement(PersonForm, {\n    onSubmit: addName,\n    newName: newName,\n    newNumber: newNumber,\n    handleAddedName: handleAddedName,\n    handleAddedNumber: handleAddedNumber,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, \"Numbers\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Person, {\n    deletePerson: deletePerson,\n    personsToShow: personsToShow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  })));\n};\nexport default App;","map":{"version":3,"names":["useState","useEffect","React","Person","Filter","PersonForm","personService","Message","App","persons","setPersons","filteredPersons","setFilteredPersons","newFilter","setNewFilter","newName","setNewName","newNumber","setNewNumber","message","setMessage","haserror","setHaserror","getAll","then","initialpersons","addName","event","filter","person","name","length","preventDefault","window","confirm","updatedperson","number","updateperson","id","returnedPerson","map","setTimeout","catch","error","console","log","nameObject","createperson","concat","response","data","handleAddedName","target","value","handleAddedNumber","handleFilterChange","nf","match","RegExp","personsToShow","deletePerson","persontodelete","removeperson"],"sources":["C:/Users/vaibh/part1/src/App.js"],"sourcesContent":["import { useState,useEffect} from 'react'\nimport React from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filteredPersons,setFilteredPersons] = useState([])\n  const [newFilter,setNewFilter] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message,setMessage] = useState(null)\n  const [haserror,setHaserror] = useState(false)\n  useEffect(() => {\n    //console.log('effect')\n    personService\n      .getAll()\n      .then(initialpersons => {\n        setPersons(initialpersons)\n      })\n  }, [])\n  //console.log('render', persons.length, 'notes')\n\n  const addName = (event) => {\n    if((persons.filter(person => person.name === newName)).length !== 0)\n    {\n      event.preventDefault()\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n      {\n        const person = persons.filter(person => person.name === newName)\n        const updatedperson = {...person[0], number: newNumber}\n        personService\n          .updateperson(updatedperson.id, updatedperson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.name !== newName ? person : returnedPerson))\n            // console.log(`${newName}'s number has been successfully updated`)\n            setNewName('')\n            setNewNumber('')\n            setMessage(`${newName}'s number has been successfully updated`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch((error) => {\n            console.log(error)\n            setPersons(persons.filter(person => person.name === newName))\n            setNewName('')\n            setNewNumber('')\n            setMessage(\n              `Information of ${newName} has already been removed from server`\n            )\n            setHaserror(true)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n      }\n    }\n    else{\n    event.preventDefault()\n\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length+1\n    }\n    personService\n      .createperson(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(\n          `Added ${nameObject.name}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setMessage(\n          `[ERROR] ${error.response.data.message}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setHaserror(true)\n        console.log(error.response.data)\n      })\n    \n  }}\n  const handleAddedName = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleAddedNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    //setCursor(event.target.selectionStart)\n    setNewFilter(event.target.value)\n    const nf=event.target.value\n    if (event.target.value === '' || event.target.value === ' ') {\n      return}\n    setFilteredPersons(persons.filter(person => person.name.match(new RegExp(nf,'i'))))\n    \n  }\n  \n const personsToShow = (newFilter !== '') ?\n    filteredPersons:\n    persons \n const deletePerson = (id) => {\n  const persontodelete = persons.filter(person => person.id === id)\n  if (window.confirm(`Delete ${persontodelete[0].name} ?`)) {\n    personService\n      .removeperson(persontodelete[0].id)\n    console.log(`${persontodelete[0].name} successfully deleted`)\n    setPersons(persons.filter(person => person.id !== persontodelete[0].id))\n\n  }\n}\n \n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} haserror={haserror}/>\n      <div>\n        <Filter value={newFilter} onChange={handleFilterChange} />\n      </div>\n      <h2>add a new</h2>\n      <PersonForm onSubmit={addName} newName={newName} newNumber={newNumber} handleAddedName={handleAddedName} handleAddedNumber={handleAddedNumber}/>\n      <h2>Numbers</h2>\n      <div>\n        <Person deletePerson={deletePerson} personsToShow={personsToShow}/>\n      </div>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module"}