{"ast":null,"code":"import _objectSpread from\"C:/Users/vaibh/part1/phonefrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/vaibh/part1/phonefrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import React from'react';import Person from'./components/Person';import Filter from'./components/Filter';import PersonForm from'./components/PersonForm';import personService from'./services/persons';import Message from'./components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredPersons=_useState4[0],setFilteredPersons=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newFilter=_useState6[0],setNewFilter=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newName=_useState8[0],setNewName=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),newNumber=_useState10[0],setNewNumber=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),haserror=_useState14[0],setHaserror=_useState14[1];useEffect(function(){//console.log('effect')\npersonService.getAll().then(function(initialpersons){setPersons(initialpersons);});},[]);//console.log('render', persons.length, 'notes')\nvar addName=function addName(event){if(persons.filter(function(person){return person.name===newName;}).length!==0){event.preventDefault();if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var person=persons.filter(function(person){return person.name===newName;});var updatedperson=_objectSpread(_objectSpread({},person[0]),{},{number:newNumber});personService.updateperson(updatedperson.id,updatedperson).then(function(returnedPerson){setPersons(persons.map(function(person){return person.name!==newName?person:returnedPerson;}));// console.log(`${newName}'s number has been successfully updated`)\nsetNewName('');setNewNumber('');setMessage(\"\".concat(newName,\"'s number has been successfully updated\"));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){console.log(error);setPersons(persons.filter(function(person){return person.name===newName;}));setNewName('');setNewNumber('');setMessage(\"Information of \".concat(newName,\" has already been removed from server\"));setHaserror(true);setTimeout(function(){setMessage(null);},5000);});}}else{event.preventDefault();var nameObject={name:newName,number:newNumber,id:persons.length+1};personService.createperson(nameObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');setMessage(\"Added \".concat(nameObject.name));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){setMessage(\"[ERROR] \".concat(error.response.data.message));setTimeout(function(){setMessage(null);},5000);setHaserror(true);console.log(error.response.data);});}};var handleAddedName=function handleAddedName(event){setNewName(event.target.value);};var handleAddedNumber=function handleAddedNumber(event){setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){//setCursor(event.target.selectionStart)\nsetNewFilter(event.target.value);var nf=event.target.value;if(event.target.value===''||event.target.value===' '){return;}setFilteredPersons(persons.filter(function(person){return person.name.match(new RegExp(nf,'i'));}));};var personsToShow=newFilter!==''?filteredPersons:persons;var deletePerson=function deletePerson(id){var persontodelete=persons.filter(function(person){return person.id===id;});if(window.confirm(\"Delete \".concat(persontodelete[0].name,\" ?\"))){personService.removeperson(persontodelete[0].id);console.log(\"\".concat(persontodelete[0].name,\" successfully deleted\"));setPersons(persons.filter(function(person){return person.id!==persontodelete[0].id;}));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Message,{message:message,haserror:haserror}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Filter,{value:newFilter,onChange:handleFilterChange})}),/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:addName,newName:newName,newNumber:newNumber,handleAddedName:handleAddedName,handleAddedNumber:handleAddedNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Person,{deletePerson:deletePerson,personsToShow:personsToShow})})]});};export default App;","map":{"version":3,"names":["useState","useEffect","React","Person","Filter","PersonForm","personService","Message","App","persons","setPersons","filteredPersons","setFilteredPersons","newFilter","setNewFilter","newName","setNewName","newNumber","setNewNumber","message","setMessage","haserror","setHaserror","getAll","then","initialpersons","addName","event","filter","person","name","length","preventDefault","window","confirm","updatedperson","number","updateperson","id","returnedPerson","map","setTimeout","catch","error","console","log","nameObject","createperson","concat","response","data","handleAddedName","target","value","handleAddedNumber","handleFilterChange","nf","match","RegExp","personsToShow","deletePerson","persontodelete","removeperson"],"sources":["C:/Users/vaibh/part1/phonefrontend/src/App.js"],"sourcesContent":["import { useState,useEffect} from 'react'\nimport React from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filteredPersons,setFilteredPersons] = useState([])\n  const [newFilter,setNewFilter] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message,setMessage] = useState(null)\n  const [haserror,setHaserror] = useState(false)\n  useEffect(() => {\n    //console.log('effect')\n    personService\n      .getAll()\n      .then(initialpersons => {\n        setPersons(initialpersons)\n      })\n  }, [])\n  //console.log('render', persons.length, 'notes')\n\n  const addName = (event) => {\n    if((persons.filter(person => person.name === newName)).length !== 0)\n    {\n      event.preventDefault()\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n      {\n        const person = persons.filter(person => person.name === newName)\n        const updatedperson = {...person[0], number: newNumber}\n        personService\n          .updateperson(updatedperson.id, updatedperson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.name !== newName ? person : returnedPerson))\n            // console.log(`${newName}'s number has been successfully updated`)\n            setNewName('')\n            setNewNumber('')\n            setMessage(`${newName}'s number has been successfully updated`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch((error) => {\n            console.log(error)\n            setPersons(persons.filter(person => person.name === newName))\n            setNewName('')\n            setNewNumber('')\n            setMessage(\n              `Information of ${newName} has already been removed from server`\n            )\n            setHaserror(true)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n      }\n    }\n    else{\n    event.preventDefault()\n\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length+1\n    }\n    personService\n      .createperson(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(\n          `Added ${nameObject.name}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setMessage(\n          `[ERROR] ${error.response.data.message}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setHaserror(true)\n        console.log(error.response.data)\n      })\n    \n  }}\n  const handleAddedName = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleAddedNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    //setCursor(event.target.selectionStart)\n    setNewFilter(event.target.value)\n    const nf=event.target.value\n    if (event.target.value === '' || event.target.value === ' ') {\n      return}\n    setFilteredPersons(persons.filter(person => person.name.match(new RegExp(nf,'i'))))\n    \n  }\n  \n const personsToShow = (newFilter !== '') ?\n    filteredPersons:\n    persons \n const deletePerson = (id) => {\n  const persontodelete = persons.filter(person => person.id === id)\n  if (window.confirm(`Delete ${persontodelete[0].name} ?`)) {\n    personService\n      .removeperson(persontodelete[0].id)\n    console.log(`${persontodelete[0].name} successfully deleted`)\n    setPersons(persons.filter(person => person.id !== persontodelete[0].id))\n\n  }\n}\n \n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} haserror={haserror}/>\n      <div>\n        <Filter value={newFilter} onChange={handleFilterChange} />\n      </div>\n      <h2>add a new</h2>\n      <PersonForm onSubmit={addName} newName={newName} newNumber={newNumber} handleAddedName={handleAddedName} handleAddedNumber={handleAddedNumber}/>\n      <h2>Numbers</h2>\n      <div>\n        <Person deletePerson={deletePerson} personsToShow={personsToShow}/>\n      </div>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}