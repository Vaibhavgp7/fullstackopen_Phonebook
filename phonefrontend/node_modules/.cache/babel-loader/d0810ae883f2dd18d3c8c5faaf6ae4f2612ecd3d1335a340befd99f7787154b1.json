{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vaibh\\\\part1\\\\phonefrontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport React from 'react';\nimport Person from './components/Person';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport personService from './services/persons';\nimport Message from './components/Message';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState([]);\n  const [newFilter, setNewFilter] = useState('');\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [message, setMessage] = useState(null);\n  const [haserror, setHaserror] = useState(false);\n  useEffect(() => {\n    //console.log('effect')\n    personService.getAll().then(initialpersons => {\n      setPersons(initialpersons);\n    });\n  }, []);\n  //console.log('render', persons.length, 'notes')\n\n  const addName = event => {\n    if (persons.filter(person => person.name === newName).length !== 0) {\n      event.preventDefault();\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const person = persons.filter(person => person.name === newName);\n        const updatedperson = {\n          ...person[0],\n          number: newNumber\n        };\n        personService.updateperson(updatedperson.id, updatedperson).then(returnedPerson => {\n          setPersons(persons.map(person => person.name !== newName ? person : returnedPerson));\n          // console.log(`${newName}'s number has been successfully updated`)\n          setNewName('');\n          setNewNumber('');\n          setMessage(`${newName}'s number has been successfully updated`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        }).catch(error => {\n          console.log(error);\n          setPersons(persons.filter(person => person.name === newName));\n          setNewName('');\n          setNewNumber('');\n          setMessage(`Information of ${newName} has already been removed from server`);\n          setHaserror(true);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n      }\n    } else {\n      event.preventDefault();\n      const nameObject = {\n        name: newName,\n        number: newNumber,\n        id: persons.length + 1\n      };\n      personService.createperson(nameObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n        setMessage(`Added ${nameObject.name}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      }).catch(error => {\n        setMessage(`[ERROR] ${error.response.data.message}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n        setHaserror(true);\n        console.log(error.response.data);\n      });\n    }\n  };\n  const handleAddedName = event => {\n    setNewName(event.target.value);\n  };\n  const handleAddedNumber = event => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilterChange = event => {\n    //setCursor(event.target.selectionStart)\n    setNewFilter(event.target.value);\n    const nf = event.target.value;\n    if (event.target.value === '' || event.target.value === ' ') {\n      return;\n    }\n    setFilteredPersons(persons.filter(person => person.name.match(new RegExp(nf, 'i'))));\n  };\n  const personsToShow = newFilter !== '' ? filteredPersons : persons;\n  const deletePerson = id => {\n    const persontodelete = persons.filter(person => person.id === id);\n    if (window.confirm(`Delete ${persontodelete[0].name} ?`)) {\n      personService.removeperson(persontodelete[0].id);\n      console.log(`${persontodelete[0].name} successfully deleted`);\n      setPersons(persons.filter(person => person.id !== persontodelete[0].id));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Message, {\n      message: message,\n      haserror: haserror\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Filter, {\n        value: newFilter,\n        onChange: handleFilterChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      onSubmit: addName,\n      newName: newName,\n      newNumber: newNumber,\n      handleAddedName: handleAddedName,\n      handleAddedNumber: handleAddedNumber\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Person, {\n        deletePerson: deletePerson,\n        personsToShow: personsToShow\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"e/Aai8eVKi+9GvO4M2bwe4lw36o=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","useEffect","React","Person","Filter","PersonForm","personService","Message","App","persons","setPersons","filteredPersons","setFilteredPersons","newFilter","setNewFilter","newName","setNewName","newNumber","setNewNumber","message","setMessage","haserror","setHaserror","getAll","then","initialpersons","addName","event","filter","person","name","length","preventDefault","window","confirm","updatedperson","number","updateperson","id","returnedPerson","map","setTimeout","catch","error","console","log","nameObject","createperson","concat","response","data","handleAddedName","target","value","handleAddedNumber","handleFilterChange","nf","match","RegExp","personsToShow","deletePerson","persontodelete","removeperson"],"sources":["C:/Users/vaibh/part1/phonefrontend/src/App.js"],"sourcesContent":["import { useState,useEffect} from 'react'\nimport React from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [filteredPersons,setFilteredPersons] = useState([])\n  const [newFilter,setNewFilter] = useState('')\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [message,setMessage] = useState(null)\n  const [haserror,setHaserror] = useState(false)\n  useEffect(() => {\n    //console.log('effect')\n    personService\n      .getAll()\n      .then(initialpersons => {\n        setPersons(initialpersons)\n      })\n  }, [])\n  //console.log('render', persons.length, 'notes')\n\n  const addName = (event) => {\n    if((persons.filter(person => person.name === newName)).length !== 0)\n    {\n      event.preventDefault()\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n      {\n        const person = persons.filter(person => person.name === newName)\n        const updatedperson = {...person[0], number: newNumber}\n        personService\n          .updateperson(updatedperson.id, updatedperson)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.name !== newName ? person : returnedPerson))\n            // console.log(`${newName}'s number has been successfully updated`)\n            setNewName('')\n            setNewNumber('')\n            setMessage(`${newName}'s number has been successfully updated`)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch((error) => {\n            console.log(error)\n            setPersons(persons.filter(person => person.name === newName))\n            setNewName('')\n            setNewNumber('')\n            setMessage(\n              `Information of ${newName} has already been removed from server`\n            )\n            setHaserror(true)\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n      }\n    }\n    else{\n    event.preventDefault()\n\n    const nameObject = {\n      name: newName,\n      number: newNumber,\n      id: persons.length+1\n    }\n    personService\n      .createperson(nameObject)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setMessage(\n          `Added ${nameObject.name}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setMessage(\n          `[ERROR] ${error.response.data.message}`\n        )\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n        setHaserror(true)\n        console.log(error.response.data)\n      })\n    \n  }}\n  const handleAddedName = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleAddedNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    //setCursor(event.target.selectionStart)\n    setNewFilter(event.target.value)\n    const nf=event.target.value\n    if (event.target.value === '' || event.target.value === ' ') {\n      return}\n    setFilteredPersons(persons.filter(person => person.name.match(new RegExp(nf,'i'))))\n    \n  }\n  \n const personsToShow = (newFilter !== '') ?\n    filteredPersons:\n    persons \n const deletePerson = (id) => {\n  const persontodelete = persons.filter(person => person.id === id)\n  if (window.confirm(`Delete ${persontodelete[0].name} ?`)) {\n    personService\n      .removeperson(persontodelete[0].id)\n    console.log(`${persontodelete[0].name} successfully deleted`)\n    setPersons(persons.filter(person => person.id !== persontodelete[0].id))\n\n  }\n}\n \n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} haserror={haserror}/>\n      <div>\n        <Filter value={newFilter} onChange={handleFilterChange} />\n      </div>\n      <h2>add a new</h2>\n      <PersonForm onSubmit={addName} newName={newName} newNumber={newNumber} handleAddedName={handleAddedName} handleAddedNumber={handleAddedNumber}/>\n      <h2>Numbers</h2>\n      <div>\n        <Person deletePerson={deletePerson} personsToShow={personsToShow}/>\n      </div>\n    </div>\n  )\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}